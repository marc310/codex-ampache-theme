!function(e){"use strict";var a=new Pjax({cacheBust:!1,elements:"a:not(.no-ajax):not(.sub-ajax):not(.ajax_add_to_cart):not(.remove)",selectors:["title","#header","#content:not(.no-ajax)"],switches:{"#content:not(.no-ajax)":function(a,o,t){var n=this;e("html").addClass("page-animating"),setTimeout(function(){a.outerHTML=o.outerHTML,n.onSwitch(),e("html").removeClass("page-animating")},600)}}});a._handleResponse=a.handleResponse,a.handleResponse=function(o,t,n){if(t.responseText.match("<html")){a._handleResponse(o,t,n);var s=e("body").hasClass("layout-app"),r=o.match(/<body class="([\s\S]*?)"/);r&&setTimeout(function(){e("body").attr("class",r[1]+(s?" layout-app":""))},600)}};var o=new Pjax({cacheBust:!1,elements:"a.sub-ajax",selectors:[".sub-content",".page-header"]});e(document).on("refresh",function(){a.refresh(),o.refresh()}),e(document).on("pjax:send",function(){e("html").addClass("page-loading")}),e(document).on("pjax:complete",function(){e("#menu-state").prop("checked",!1),e("#search-state").prop("checked",!1),e(".modal-backdrop").remove(),e("html").removeClass("page-loading scrolled"),e(document).trigger("refresh"),e.fn.plugin&&e("[data-plugin]").plugin()}),e(document).on("scroll",function(a){var o=e("html"),t=e(window).scrollTop();a.originalEvent.detail>0||a.originalEvent.wheelDelta<0?o.removeClass("scroll-up").addClass("scroll-down"):o.removeClass("scroll-down").addClass("scroll-up"),o.addClass("scrolled"),0==t&&(o.removeClass("scroll-up scroll-down"),o.removeClass("scrolled"));var n=50,s=e(".entry:not(.hide-title) .entry-header-container .post-thumbnail img");if(0!=s.length){var r=s.closest(".post-thumbnail").height();if(0!=r){var l=parseFloat(s.attr("data-pos-y"));isNaN(l)||(n=l),s.attr("style","object-position: 50% "+Math.min(t/r*100+n,100)+"%")}}}),e(document).on("click","#commentform #submit",function(o){var t=e(this),n=t.closest("#commentform"),s=e('<div class="comment-message"></div>');n.find(".comment-message").remove(),s.insertBefore(".comment-form-comment"),t.prop("disable",!0);var r=n.serialize(),l=n.attr("action");return e.ajax({type:"post",url:l,data:r,error:function(e,a,o){var s=e.responseText.match(/<body id="error-page">([\s\S^<]*?)<\/body>/);n.find(".comment-message").html("").append(s[0]).addClass("error"),t.prop("disable",!1)}}).then(function(e,o,s){t.prop("disable",!1);var r=e.match(/<body id="error-page">([\s\S^<]*?)<\/body>/);r?n.find(".comment-message").html("").append(r[0]).addClass("error"):a.loadUrl(window.location.href)}),!1}),e.fn.plugin&&e("[data-plugin]").plugin()}(jQuery);